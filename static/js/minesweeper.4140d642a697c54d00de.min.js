(()=>{var t={503:function(t){t.exports=function(){class t{constructor(t){this.init=this.init.bind(this),this.create=this.create.bind(this),this.mouseLeaveCanvas=this.mouseLeaveCanvas.bind(this),this.assets_dir=t}init(){var e;return 36,e=650,this.game.plugins.add(Phaser.Plugin.SaveCPU).renderOnFPS=60,this.hoverMenuButtons=[],this.game.input.mouse.mouseOutCallback=this.mouseLeaveCanvas,this.game.input.mspointer.pointerOutCallback=this.mouseLeaveCanvas,this.scaleFactor=Math.max(this.game.width/e,.7),this.menubarHeight=Math.round(36*this.scaleFactor),this.menuSpacing=Math.round(10*this.scaleFactor),document.getElementById("game").style.cursor="default",this.menuFontColor="#FFFFFF",this.menuFont={font:"18pt "+t.MAIN_FONT,fill:this.menuFontColor,align:"center"},this.isWinner=!1,this.winAnimationComplete=!1,this.gameUnderway=!1}create(){var t;return this.backgroundGroup=this.game.add.group(),this.background=this.game.add.image(0,this.menubarHeight,"background"),this.backgroundGroup.add(this.background),this.marker=this.game.add.graphics(0,0),this.playingArea=new Phaser.Rectangle(0,this.menubarHeight,Math.floor(this.PLAY_AREA_RATIO*this.game.width),this.game.height-this.menubarHeight),this.background.scale.set(this.getBackgroundScale(this.background)),null!=this.revealer&&this.initRevealer(),this.drawMenubar(),null!=(t=this.revealer)&&t.create("textures"),this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.fullScreenTarget=document.getElementById("game"),this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!0,this.game.scale.refresh()}drawMenubar(){var t,e,i,s,n;for((t=this.game.add.bitmapData(this.game.world.width,this.menubarHeight)).addToWorld(),i=s=0,n=this.menubarHeight;0<=n?s<n:s>n;i=0<=n?++s:--s)e=Phaser.Color.interpolateColor(4473924,0,this.menubarHeight,i),t.rect(0,i,this.game.world.width,i+1,Phaser.Color.getWebRGB(e));return this.menubarMidY=this.menubarHeight/2,this.titleText=this.addText(this.game.world.centerX,this.menubarMidY,this.TEXT.title,this.menuFont),this.titleText.anchor.set(.5),this.newGameButton=this.createTextMenuButton(this.menuSpacing,0,"New Game",this.newGame),this.fullScreenButton=this.createImageMenuButton(this.game.width,1,this.createFullscreenIcon(),this.fullScreen),this.fullScreenButton.scale.set(this.scaleFactor),this.game.scale.onFullScreenError.add(this.fullScreenFailure,this),this.game.world.bringToTop(this.marker)}createTextMenuButton(t,e,i,s){var n;return(n=this.addText(t,this.menubarMidY,i,this.menuFont)).anchor.set(e,.5),this.configureButton(n,s),this.drawMenuButtonOutline(n,{left:6,top:1,right:6,bottom:1}),n}createImageMenuButton(t,e,i,s){var n;return(n=this.game.add.image(t,this.menubarMidY,i)).anchor.set(e,.5),this.configureButton(n,s),n}configureButton(t,e){return t.inputEnabled=!0,t.input.useHandCursor=!0,this.game.device.touch||(this.hoverMenuButtons.push(t),t.events.onInputOver.add(this.buttonHoverStart,this),t.events.onInputOut.add(this.buttonHoverStop,this)),t.events.onInputUp.add(e,this)}drawMenuButtonOutline(t,e){var i,s,n,r;return 5,s=t.left-e.left,n=t.top-e.top,r=t.width+e.left+e.right,i=t.height+e.top+e.bottom,this.marker.lineStyle(2,6710886,1),this.marker.drawRoundedRect(s,n,r,i,5),this.marker.lineStyle(0,0,0)}createFullscreenIcon(){var t,e,i;return 6,34,9,e=25,(t=this.game.add.graphics(0,0)).lineStyle(3,16777215,1),t.moveTo(9,15),t.lineTo(9,9),t.lineTo(15,9),t.moveTo(19,9),t.lineTo(e,9),t.lineTo(e,15),t.moveTo(e,19),t.lineTo(e,e),t.lineTo(19,e),t.moveTo(15,e),t.lineTo(9,e),t.lineTo(9,19),t.lineStyle(1,16777215,0),t.moveTo(0,0),t.lineTo(0,34),t.lineTo(34,34),t.lineTo(34,0),t.lineTo(0,0),i=t.generateTexture(),t.destroy(),i}getBackgroundScale(t){var e,i,s,n;return s=t.width,e=t.height,n=i=1,s<this.game.width&&(n=this.game.width/t.width),e<this.game.height&&(i=this.game.height/t.height),Math.max(n,i,1)}getGameDimensions(){var t,e,i,s,n;for(e=document.getElementById("game");0===e.clientWidth;)e=e.parentNode;return(n=e.clientWidth)!==document.body.clientWidth?[n,Math.round(this.HEIGHT_WIDTH_RATIO*n)]:((s=document.body.clientHeight)/n>=this.HEIGHT_WIDTH_RATIO?(i=n,t=Math.round(this.HEIGHT_WIDTH_RATIO*i)):(t=s,i=Math.round(1/this.HEIGHT_WIDTH_RATIO*t)),[i,t])}start(){var t,e,i;return[i,t]=this.getGameDimensions(),e={init:this.init,preload:this.preload,create:this.create,update:this.update},this.game=new Phaser.Game(i,t,Phaser.CANVAS,"game",e)}initRevealer(){var t;return(t=this.playingArea.clone()).x=this.playingArea.width+1,t.width=this.game.width-this.playingArea.width,this.revealer.setBounds(t)}addText(t,e,i,s){return(i=this.game.add.text(t,e,i,s)).scale.set(this.scaleFactor),i}buttonHoverStart(t){return null==t.fill_bak&&(t.fill_bak=t.fill),t.fill="#FFFF00"}buttonHoverStop(t){if(null!=t.fill_bak)return t.fill=t.fill_bak}mouseLeaveCanvas(){return this.hoverMenuButtons.forEach((t=>this.buttonHoverStop(t)))}fullScreenFailure(){return alert("Full screen mode didn't work. The device may not support it.")}fullScreen(){return this.game.scale.isFullScreen?(this.game.scale.stopFullScreen(),document.getElementById("unlocked-galleries-wrap").style.position="fixed"):(this.game.scale.startFullScreen(),document.getElementById("unlocked-galleries-wrap").style.position="absolute")}newGame(){var t,e;if(this.gameUnderway=!1,this.winAnimationComplete=!1,null!=(t=this.revealer)&&t.resetCovers(),this.isWinner)return this.isWinner=!1,null!=(e=this.revealer)?e.readyImage():void 0}newRevealerImage(){0}toggleAllInputs(t){this.newGameButton.input.enabled=t,this.fullScreenButton.input.enabled=t}}return t.MAIN_FONT="Sarabun",t}.call(this)},785:function(t,e,i){var s,n,r=function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")};s=i(503),n=i(591),t.exports=function(){var t,e,i,a,h,o,l;class u extends s{constructor(){super(...arguments),this.preload=this.preload.bind(this),this.create=this.create.bind(this),this.setNumFlags=this.setNumFlags.bind(this),this.createMatrix=this.createMatrix.bind(this),this.newGame=this.newGame.bind(this),this.loseGame=this.loseGame.bind(this),this.tileInputDown=this.tileInputDown.bind(this),this.tileInputUp=this.tileInputUp.bind(this),this.doWin=this.doWin.bind(this),this.animateWin=this.animateWin.bind(this),this.uncoverEmptyTiles=this.uncoverEmptyTiles.bind(this),this.uncoverTile=this.uncoverTile.bind(this),this.drawLoseScreen=this.drawLoseScreen.bind(this)}preload(){return r(this,u),this.game.load.atlas("textures",`${this.assets_dir}/sprites.png`,`${this.assets_dir}/sprites.json`),this.game.load.image("background",`${this.assets_dir}/background.jpg`)}create(){var t,i,s,o,l,d,c,m,g;for(r(this,u),this.tileSize=this.game.world.width*this.PLAY_AREA_RATIO*e/a,this.imgScale=this.tileSize/this.game.cache.getFrameData("textures").getFrameByName("tile1").width,super.create(),this.fieldRect=new Phaser.Rectangle(0,0,this.tileSize*a,this.tileSize*h),this.fieldRect.centerOn(this.game.world.centerX*this.PLAY_AREA_RATIO,this.game.world.centerY+this.menubarHeight/2),document.oncontextmenu=t=>!this.fieldRect.contains(t.offsetX,t.offsetY),(o=this.game.add.graphics(this.fieldRect.x-2,this.fieldRect.y-2)).lineStyle(1,8421504),o.drawRect(0,0,this.fieldRect.width+3,this.fieldRect.height+3),this.tiles=[],c=l=0,m=h;0<=m?l<m:l>m;c=0<=m?++l:--l)for(this.tiles.push([]),i=d=0,g=a;0<=g?d<g:d>g;i=0<=g?++d:--d)(t=this.game.add.button(this.fieldRect.left+i*this.tileSize,this.fieldRect.top+c*this.tileSize,"textures",this.tileInputUp)).scale.set(this.imgScale),t.events.onInputDown.add(this.tileInputDown,this),this.tiles[c].push(new n(c,i,t));return s=(this.fieldRect.bottom+this.game.world.height)/2,this.mineCounter1=this.game.add.image(this.fieldRect.centerX-2,s,"textures"),this.mineCounter1.anchor.setTo(1,.5),this.mineCounter1.scale.set(this.imgScale),this.mineCounter2=this.game.add.image(this.fieldRect.centerX+2,s,"textures"),this.mineCounter2.anchor.setTo(0,.5),this.mineCounter2.scale.set(this.imgScale),this.smiley=this.game.add.button(this.fieldRect.centerX,(this.menubarHeight+this.fieldRect.top)/2,"textures",this.newGame),this.smiley.anchor.setTo(.5),this.smiley.scale.set(this.imgScale),this.newGame(),this.setupDone=!0}setNumFlags(t){var e,i,s;if(r(this,u),this.numFlags=t,(e=o-this.numFlags)<0&&(e=0),s=`digits${Math.floor(e/10)}`,this.mineCounter1.frameName!==s&&(this.mineCounter1.frameName=s),i="digits"+e%10,this.mineCounter2.frameName!==i)return this.mineCounter2.frameName=i}createMatrix(){var t,e,i,s,n,l,d,c,m,g,p,f,v;for(r(this,u),this.mineTiles=[],f=[],n=0,g=o;0<=g?n<g:n>g;0<=g?n++:n--)p=!0,f.push(function(){var n;for(n=[];p;)l=Math.floor(Math.random()*h),t=Math.floor(Math.random()*a),this.tiles[l][t].hasMine?n.push(void 0):(p=!1,this.tiles[l][t].hasMine=!0,this.mineTiles.push(this.tiles[l][t]),m=l-1<0?l:l-1,c=l+2>h?h:l+2,s=t-1<0?t:t-1,i=t+2>a?a:t+2,n.push(function(){var t,n,r,a;for(a=[],d=t=n=m,r=c;n<=r?t<r:t>r;d=n<=r?++t:--t)a.push(function(){var t,n,r,a;for(a=[],e=t=n=s,r=i;n<=r?t<r:t>r;e=n<=r?++t:--t)(v=this.tiles[d][e]).hasMine?a.push(void 0):a.push(v.mineCount+=1);return a}.call(this));return a}.call(this)));return n}.call(this));return f}newGame(){var t,e,i,s,n,a,h,o;if(r(this,u),null!=this.setupDone)for(null!=(n=this.loseScreen)&&(n.visible=!1),t=0,i=(a=this.tiles).length;t<i;t++)for(e=0,s=(o=a[t]).length;e<s;e++)o[e].init();return this.nonMinesLeft=l,this.setNumFlags(0),this.createMatrix(),this.smiley.frameName="smiley_ok",null!=(h=this.winMessageGroup)&&(h.visible=!1),super.newGame()}loseGame(t){var e,i,s,a,h,o,l,d,c,m,g;for(r(this,u),t.setFrame("explosion"),i=0,h=(c=this.mineTiles).length;i<h;i++)(d=c[i])!==t&&d.state!==n.FLAGGED&&d.setFrame("bad_tile");for(s=0,o=(m=this.tiles).length;s<o;s++)for(a=0,l=(g=m[s]).length;a<l;a++)(e=g[a]).state!==n.FLAGGED||e.hasMine||e.setFrame("misflagged");return this.smiley.frameName="smiley_lose",this.drawLoseScreen(),this.disableAllTiles()}disableAllTiles(){var t,e,i,s,n,r;for(s=[],t=0,e=(i=this.tiles).length;t<e;t++)n=i[t],s.push(function(){var t,e,i;for(i=[],t=0,e=n.length;t<e;t++)r=n[t],i.push(r.button.input.enabled=!1);return i}());return s}tileInputDown(t,e,i){if(r(this,u),!e.isMouse)return this.lastInputDown=this.game.time.now}tileInputUp(t,e,i){return r(this,u),this.gameUnderway=!0,e.isMouse?e.leftButton.justReleased()?this.tileClicked(t.tile):e.rightButton.justReleased()?this.tileAltClicked(t.tile):void 0:null!=this.lastInputDown?(this.game.time.now-this.lastInputDown<400?this.tileClicked(t.tile):this.tileAltClicked(t.tile),this.lastInputDown=null):this.tileClicked(t.tile)}tileClicked(t){if(t.state!==n.FLAGGED){if(t.hasMine)return this.loseGame(t);if(this.uncoverTile(t),0===t.mineCount&&this.uncoverEmptyTiles(t),0===this.nonMinesLeft)return this.doWin()}}tileAltClicked(t){if(t.state===n.FLAGGED&&this.setNumFlags(this.numFlags-1),t.setState((t.state+1)%3),t.state===n.FLAGGED)return this.setNumFlags(this.numFlags+1)}doWin(){var t,e,i,s;for(r(this,u),this.isWinner=!0,this.smiley.frameName="smiley_win",this.disableAllTiles(),this.setNumFlags(o),t=0,e=(i=this.mineTiles).length;t<e;t++)(s=i[t]).state!==n.FLAGGED&&s.setState(n.FLAGGED);return this.animateWin()}animateWin(){var e,s,n,a,h,l,d,c,m,g,p,f,v;for(r(this,u),this.toggleAllInputs(!1),this.tileSize,f=this,p=function(){var e,s,n,r,a,h,o;return null!=this.winMessageGroup?this.winMessageGroup.visible=!0:(this.winMessageGroup=this.game.add.group(),r=Math.round(7*this.imgScale),o=this.fieldRect.width-2*r,s=(n=Math.round(150*this.imgScale))/2,(e=this.game.add.graphics(this.fieldRect.x+r,this.fieldRect.centerY-s,this.winMessageGroup)).beginFill(0,.85),e.drawRoundedRect(0,0,o,n,Math.round(30*this.imgScale)),e.endFill(),a={font:Math.round(40*this.imgScale)+"pt "+t,fill:"#73BAD7",boundsAlignH:"center",boundsAlignV:"bottom"},this.game.add.text(0,0,"Mines cleared!",a,this.winMessageGroup).setTextBounds(e.left,e.top,o,Math.round(.6*n)),h={font:Math.round(16*this.imgScale)+"pt "+i,fill:"#FF0",boundsAlignH:"center",boundsAlignV:"middle"},this.game.add.text(0,0,"Click 'New Game' to play again",h,this.winMessageGroup).setTextBounds(e.left,this.fieldRect.centerY,o,s)),this.toggleAllInputs(!0)},n=0,m=function(){if(this,this.remove(),(n+=1)===o)return f.game.time.events.add(300,p,f)},e=function(){return this,this.setFrame("explosion"),f.game.time.events.add(70,m,this)},a=0,s=function(){var t,i,s,n,r,h;if(this,this.setFrame("blue_flag"),(a+=1)===o){for(t=1,r=[],i=0,s=(n=f.mineTiles).length;i<s;i++)h=n[i],f.game.time.events.add(120*t,e,h),r.push(t+=1);return r}},h=1,g=[],l=0,d=(c=this.mineTiles).length;l<d;l++)v=c[l],this.game.time.events.add(80*h,s,v),g.push(h+=1);return g}uncoverEmptyTiles(t){var e,i,s,o,l,d,c,m,g,p,f,v,b,w,S,y,T;for(r(this,u),t.remove(),v=t.row-1<0?t.row:t.row-1,f=t.row+2>h?h:t.row+2,o=t.col-1<0?t.col:t.col-1,s=t.col+2>a?a:t.col+2,g=[],p=l=b=v,w=f;b<=w?l<w:l>w;p=b<=w?++l:--l)for(i=d=S=o,y=s;S<=y?d<y:d>y;i=S<=y?++d:--d)(e=this.tiles[p][i])!==t&&(e.state!==n.BLANK&&e.state!==n.QUESTION||(this.uncoverTile(e),0===e.mineCount&&g.push(e)));for(T=[],c=0,m=g.length;c<m;c++)t=g[c],T.push(this.uncoverEmptyTiles(t));return T}uncoverTile(t){var e;return r(this,u),t.setState(n.UNCOVERED),this.nonMinesLeft-=1,null!=(e=this.revealer)?e.reveal(this.nonMinesLeft):void 0}drawLoseScreen(){var t,e,s,n,a,h;return r(this,u),null!=this.loseScreen?this.loseScreen.visible=!0:(this.loseScreen=this.game.add.group(),s=this.smiley.top+Math.round(this.smiley.height/2),(t=this.game.add.image(this.smiley.left-20,s,"textures","gameover1")).anchor.setTo(1,.5),(e=this.game.add.image(this.smiley.right+20,s,"textures","gameover2")).anchor.y=.5,t.scale.set(this.imgScale),e.scale.set(this.imgScale),n={font:"22pt "+i,fill:"#ff0",boundsAlignH:"center",boundsAlignV:"middle"},(a=this.game.add.text(0,0,"Click 'New Game' to try again",n)).setTextBounds(this.fieldRect.x,this.fieldRect.bottom+3,this.fieldRect.width,this.mineCounter1.top-this.fieldRect.bottom),n.font="18pt "+i,n.fill="#A9DDFF",(h=this.game.add.text(0,0,"Valiant effort, but you blew up",n)).setTextBounds(this.fieldRect.x,this.mineCounter1.bottom,this.fieldRect.width,this.game.world.height-this.mineCounter1.bottom),this.loseScreen.addMultiple([t,e,a,h]))}}return i=s.MAIN_FONT,t="Piedra",u.prototype.TEXT={title:"Minesweeper"},u.prototype.HEIGHT_WIDTH_RATIO=1.5,u.prototype.PLAY_AREA_RATIO=1,l=(a=12)*(h=12)-(o=30),e=.9,u}.call(this)},591:function(t){t.exports=function(){class t{constructor(t,e,i){this.init=this.init.bind(this),this.setState=this.setState.bind(this),this.setFrame=this.setFrame.bind(this),this.remove=this.remove.bind(this),this.row=t,this.col=e,this.button=i,this.button.tile=this,this.overlay=this.button.game.add.image(0,0,"textures"),this.button.addChild(this.overlay),this.button.inputEnabled=!0,this.init()}init(){return this.mineCount=0,this.state=t.BLANK,this.hasMine=!1,this.overlay.kill(),"tile1"!==this.button.frameName&&"tile2"!==this.button.frameName&&(this.button.frameName=(this.col+this.row)%2%2==0?"tile1":"tile2"),this.button.visible||this.button.revive(),this.button.input.enabled=!0}setState(e){var i;return this.state=e,e===t.UNCOVERED?0===this.mineCount?this.remove():(this.overlay.kill(),this.setFrame(`${this.mineCount}`),this.button.input.enabled=!1):(i=function(){switch(this.state){case t.BLANK:return"tile";case t.FLAGGED:return"red_flag";case t.QUESTION:return"question"}}.call(this),this.setFrame(i))}setFrame(t){return"tile"===t?this.overlay.kill():"question"!==t&&"red_flag"!==t&&"blue_flag"!==t&&"misflagged"!==t?("explosion"!==t&&"bad_tile"!==t||this.overlay.kill(),this.button.frameName=t):(this.overlay.frameName=t,this.overlay.visible?void 0:this.overlay.revive())}remove(){return this.overlay.kill(),this.button.kill(),this.button.input.enabled=!1}}return t.BLANK=0,t.FLAGGED=1,t.QUESTION=2,t.UNCOVERED=3,t}.call(this)},419:()=>{Phaser.Plugin.SaveCPU=function(t,e){"use strict";Phaser.Plugin.call(this,t,e)},Phaser.Plugin.SaveCPU.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.SaveCPU.constructor=Phaser.Plugin.SaveCPU,Phaser.Plugin.SaveCPU.prototype.init=function(){"use strict";var t;this.__defineSetter__("renderOnFPS",(function(t){this._renderOnFPS=t,this._tsdiff=1e3/t})),this.__defineGetter__("renderOnFPS",(function(){return this._renderOnFPS})),this._tsdiff=0,this.renderOnFPS=30,this.renderOnPointerChange=!1,this.renderDirty=!0,this.game.updateRender?this._init1():this._init0(),this.fpsDirty=0,this.hrts=0,t=this,window.requestAnimationFrame((function(e){t._trackFPS(e)}))},Phaser.Plugin.SaveCPU.prototype._init0=function(){this.renderType=this.game.renderType,this.switchRender=this._switchRender0},Phaser.Plugin.SaveCPU.prototype._init1=function(){var t=this.game;t.updateRenderReal=t.updateRender,t.updateRenderNull=function(){},this.switchRender=this._switchRender1},Phaser.Plugin.SaveCPU.prototype._trackFPS=function(t){var e;t-this.hrts>this._tsdiff&&(this.fpsDirty=!0,this.hrts=t),e=this,window.requestAnimationFrame((function(t){e._trackFPS(t)}))},Phaser.Plugin.SaveCPU.prototype._switchRender0=function(){"use strict";var t=this.game;this.renderDirty?t.renderType=this.renderType:t.renderType=Phaser.HEADLESS,this.renderDirty=!1},Phaser.Plugin.SaveCPU.prototype._switchRender1=function(){"use strict";var t=this.game;this.renderDirty?t.updateRender=t.updateRenderReal:t.updateRender=t.updateRenderNull},Phaser.Plugin.SaveCPU.prototype.forceRender=function(){"use strict";this.renderDirty=!0},Phaser.Plugin.SaveCPU.prototype._forceRenderOnPointerChange=function(){"use strict";if(!this.renderOnPointerChange)return!1;var t=this.game.input;t.oldx===t.x&&t.oldy===t.y||(this.forceRender(),t.oldx=t.x,t.oldy=t.y),t.oldDown!==t.activePointer.isDown&&(this.forceRender(),t.oldDown=t.activePointer.isDown)},Phaser.Plugin.SaveCPU.prototype._forceRenderOnFPS=function(){"use strict";return!(!this.renderOnFPS||!this.fpsDirty)&&(this.fpsDirty=!1,this.forceRender(),!0)},Phaser.Plugin.SaveCPU.prototype.postUpdate=function(){"use strict";(this.renderDirty||this._forceRenderOnFPS()||this._forceRenderOnPointerChange())&&this.switchRender()},Phaser.Plugin.SaveCPU.prototype.postRender=function(){"use strict";this.renderDirty&&(this.renderDirty=!1,this.switchRender())}}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}(()=>{i(419);const t=i(785);document.addEventListener("DOMContentLoaded",(()=>new t("/static/game_assets/minesweeper").start()))})()})();