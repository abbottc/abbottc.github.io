(()=>{var t,e,i,o,n,s={9:function(t){"undefined"!=typeof self&&self,t.exports=function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,i){"use strict";function o(t,e,i){e=e.split(/\s+/);for(var o=0;o<e.length;++o)t.addEventListener(e[o],i)}function n(t,e,i){e=e.split(/\s+/);for(var o=0;o<e.length;++o)t.removeEventListener(e[o],i)}Object.defineProperty(e,"__esModule",{value:!0}),e.on=o,e.off=n,e.isFunction=function(t){return"function"==typeof t},e.isDef=function(t){return void 0!==t},e.getPointerEvent=function(t){return t.touches&&t.touches[0]||t}},function(t,e,i){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(i(2));t.exports=function(t){return new o.default(t)}},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),u=o(i(3)),h=o(i(4)),d=i(0),c=function(t,e){return t.position-e.position},m=function(t){return t+"-gradient("},p=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t=Object.assign({},t);var o={pfx:"grp",el:".grp",colorEl:"",min:0,max:100,direction:"90deg",type:"linear",height:"30px",width:"100%",emptyColor:"#000",onValuePos:function(t){return parseInt(t)}};for(var n in o)n in t||(t[n]=o[n]);var r=t.el;if(!((r="string"==typeof r?document.querySelector(r):r)instanceof HTMLElement))throw"Element not found, given "+r;return i.el=r,i.handlers=[],i.options=t,i.on("handler:color:change",(function(t,e){return i.change(e)})),i.on("handler:position:change",(function(t,e){return i.change(e)})),i.on("handler:remove",(function(t){return i.change(1)})),i.on("handler:add",(function(t){return i.change(1)})),i.render(),i}return r(e,t),l(e,[{key:"destroy",value:function(){var t=this;this.clear(),this.e={},["el","handlers","options","colorPicker"].forEach((function(e){return t[e]=0})),["previewEl","wrapperEl","sandEl"].forEach((function(e){var i=t[e];i&&i.parentNode&&i.parentNode.removeChild(i),delete t[e]}))}},{key:"setColorPicker",value:function(t){this.colorPicker=t}},{key:"getValue",value:function(t,e){var i=this.getColorValue(),o=t||this.getType(),n=["top","left","bottom","right","center"],s=e||this.getDirection();return["linear","repeating-linear"].indexOf(o)>=0&&n.indexOf(s)>=0&&(s="center"===s?"to right":"to "+s),["radial","repeating-radial"].indexOf(o)>=0&&n.indexOf(s)>=0&&(s="circle at "+s),i?o+"-gradient("+s+", "+i+")":""}},{key:"getSafeValue",value:function(t,e){var i=this.previewEl,o=this.getValue(t,e);if(!this.sandEl&&(this.sandEl=document.createElement("div")),!i||!o)return"";for(var s=this.sandEl.style,a=[o].concat(n(this.getPrefixedValues(t,e))),r=void 0,l=0;l<a.length&&(r=a[l],s.backgroundImage=r,s.backgroundImage!=r);l++);return s.backgroundImage}},{key:"setValue",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.type,n=this.direction,s=e.indexOf("(")+1,a=e.lastIndexOf(")"),r=e.substring(s,a),l=r.split(/,(?![^(]*\)) /);if(this.clear(i),r){l.length>2&&(n=l.shift());var u=void 0;["repeating-linear","repeating-radial","linear","radial"].forEach((function(t){e.indexOf(m(t))>-1&&!u&&(u=1,o=t)})),this.setDirection(n,i),this.setType(o,i),l.forEach((function(e){var o=e.split(" "),n=parseFloat(o.pop()),s=o.join("");t.addHandler(n,s,0,i)})),this.updatePreview()}else this.updatePreview()}},{key:"getColorValue",value:function(){var t=this.handlers;return t.sort(c),(t=1==t.length?[t[0],t[0]]:t).map((function(t){return t.getValue()})).join(", ")}},{key:"getPrefixedValues",value:function(t,e){var i=this.getValue(t,e);return["-moz-","-webkit-","-o-","-ms-"].map((function(t){return""+t+i}))}},{key:"change",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.updatePreview(),!e.silent&&this.emit("change",t)}},{key:"setDirection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.options.direction=t;var i=e.complete,o=void 0===i?1:i;this.change(o,e)}},{key:"getDirection",value:function(){return this.options.direction}},{key:"setType",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.options.type=t;var i=e.complete,o=void 0===i?1:i;this.change(o,e)}},{key:"getType",value:function(){return this.options.type}},{key:"addHandler",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=new h.default(this,t,e,i,o);return!o.silent&&this.emit("handler:add",n),n}},{key:"getHandler",value:function(t){return this.handlers[t]}},{key:"getHandlers",value:function(){return this.handlers}},{key:"clear",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.handlers,i=e.length-1;i>=0;i--)e[i].remove(t)}},{key:"getSelected",value:function(){for(var t=this.getHandlers(),e=0;e<t.length;e++){var i=t[e];if(i.isSelected())return i}return null}},{key:"updatePreview",value:function(){var t=this.previewEl;t&&(t.style.backgroundImage=this.getValue("linear","to right"))}},{key:"initEvents",value:function(){var t=this,e=this.previewEl;e&&(0,d.on)(e,"click",(function(i){var o=t.options,n=o.min,s=o.max,a={w:e.clientWidth,h:e.clientHeight},r=i.offsetX-e.clientLeft,l=i.offsetY-e.clientTop,u=r/a.w*100;if(!(u>s||u<n||l>a.h||l<0)){var h=document.createElement("canvas"),d=h.getContext("2d");h.width=a.w,h.height=a.h;var c=d.createLinearGradient(0,0,a.w,a.h);t.getHandlers().forEach((function(t){return c.addColorStop(t.position/100,t.color)})),d.fillStyle=c,d.fillRect(0,0,h.width,h.height),h.style.background="black";var m=h.getContext("2d").getImageData(r,l,1,1).data,p="rgba("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+")",v="rgba(0, 0, 0, 0)"==p?o.emptyColor:p;t.addHandler(u,v)}}))}},{key:"render",value:function(){var t=this.options,e=this.el,i=t.pfx,o=t.height,n=t.width;if(e){var s=i+"-wrapper",a=i+"-preview";e.innerHTML='\n      <div class="'+s+'">\n        <div class="'+a+'"></div>\n      </div>\n    ';var r=e.querySelector("."+s),l=e.querySelector("."+a),u=r.style;u.position="relative",this.wrapperEl=r,this.previewEl=l,o&&(u.height=o),n&&(u.width=n),this.initEvents(),this.updatePreview()}}}]),e}(u.default);e.default=p},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=function(){function t(){o(this,t)}return n(t,[{key:"on",value:function(t,e,i){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:i}),this}},{key:"once",value:function(t,e,i){function o(){n.off(t,o),e.apply(i,arguments)}var n=this;return o._=e,this.on(t,o,i)}},{key:"emit",value:function(t){for(var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),o=0,n=i.length;o<n;o++)i[o].fn.apply(i[o].ctx,e);return this}},{key:"off",value:function(t,e){var i=this.e||(this.e={}),o=i[t],n=[];if(o&&e)for(var s=0,a=o.length;s<a;s++)o[s].fn!==e&&o[s].fn._!==e&&n.push(o[s]);return n.length?i[t]=n:delete i[t],this}}]),t}();e.default=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=i(0),a=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"black",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};o(this,t),e.getHandlers().push(this),this.gp=e,this.position=i,this.color=n,this.selected=0,this.render(),s&&this.select(a)}return n(t,[{key:"toJSON",value:function(){return{position:this.position,selected:this.selected,color:this.color}}},{key:"setColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.color=t,this.emit("handler:color:change",this,e)}},{key:"setPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.getEl();this.position=t,i&&(i.style.left=t+"%"),this.emit("handler:position:change",this,e)}},{key:"getColor",value:function(){return this.color}},{key:"getPosition",value:function(){var t=this.position,e=this.gp.options.onValuePos;return(0,s.isFunction)(e)?e(t):t}},{key:"isSelected",value:function(){return!!this.selected}},{key:"getValue",value:function(){return this.getColor()+" "+this.getPosition()+"%"}},{key:"select",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getEl(),i=this.gp.getHandlers();!t.keepSelect&&i.forEach((function(t){return t.deselect()})),this.selected=1;var o=this.getSelectedCls();e&&(e.className+=" "+o),this.emit("handler:select",this)}},{key:"deselect",value:function(){var t=this.getEl();this.selected=0;var e=this.getSelectedCls();t&&(t.className=t.className.replace(e,"").trim()),this.emit("handler:deselect",this)}},{key:"getSelectedCls",value:function(){return this.gp.options.pfx+"-handler-selected"}},{key:"remove",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.cpFn,o=this.getEl(),n=this.gp.getHandlers(),a=n.splice(n.indexOf(this),1)[0];return o&&o.parentNode.removeChild(o),!e.silent&&this.emit("handler:remove",a),(0,s.isFunction)(i)&&i(this),["el","gp"].forEach((function(e){return t[e]=0})),a}},{key:"getEl",value:function(){return this.el}},{key:"initEvents",value:function(){var t=this,e=this.getEl(),i=this.gp.previewEl,o=this.gp.options,n=o.min,a=o.max,r=e.querySelector("[data-toggle=handler-close]"),l=e.querySelector("[data-toggle=handler-color-c]"),u=e.querySelector("[data-toggle=handler-color-wrap]"),h=e.querySelector("[data-toggle=handler-color]"),d=e.querySelector("[data-toggle=handler-drag]"),c=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=e.target.value;t.setColor(o,i),u&&(u.style.backgroundColor=o)};if(l&&(0,s.on)(l,"click",(function(t){return t.stopPropagation()})),r&&(0,s.on)(r,"click",(function(e){e.stopPropagation(),t.remove()})),h&&((0,s.on)(h,"change",c),(0,s.on)(h,"input",(function(t){return c(t,0)}))),d){var m=0,p=0,v=0,g={},f={},y={},b=function(e){var i=(0,s.getPointerEvent)(e);v=1,y.x=i.clientX-f.x,y.y=i.clientY-f.y,m=100*y.x,m/=g.w,m=(m=(m=p+m)<n?n:m)>a?a:m,t.setPosition(m,0),t.emit("handler:drag",t,m),(0,s.isDef)(e.button)&&0===e.which&&_(e)},_=function e(i){(0,s.off)(document,"touchmove mousemove",b),(0,s.off)(document,"touchend mouseup",e),v&&(v=0,t.setPosition(m),t.emit("handler:drag:end",t,m))},x=function(e){if(!(0,s.isDef)(e.button)||0===e.button){t.select();var o=(0,s.getPointerEvent)(e);p=t.position,g.w=i.clientWidth,g.h=i.clientHeight,f.x=o.clientX,f.y=o.clientY,(0,s.on)(document,"touchmove mousemove",b),(0,s.on)(document,"touchend mouseup",_),t.emit("handler:drag:start",t)}};(0,s.on)(d,"touchstart mousedown",x),(0,s.on)(d,"click",(function(t){return t.stopPropagation()}))}}},{key:"emit",value:function(){var t;(t=this.gp).emit.apply(t,arguments)}},{key:"render",value:function(){var t=this.gp,e=t.options,i=t.previewEl,o=t.colorPicker,n=e.pfx,s=e.colorEl,a=this.getColor();if(i){var r=document.createElement("div"),l=r.style,u=n+"-handler";return r.className=u,r.innerHTML='\n      <div class="'+u+'-close-c">\n        <div class="'+u+'-close" data-toggle="handler-close">&Cross;</div>\n      </div>\n      <div class="'+u+'-drag" data-toggle="handler-drag"></div>\n      <div class="'+u+'-cp-c" data-toggle="handler-color-c">\n        '+(s||'\n          <div class="'+u+'-cp-wrap" data-toggle="handler-color-wrap" style="background-color: '+a+'">\n            <input type="color" data-toggle="handler-color" value="'+a+'">\n          </div>')+"\n      </div>\n    ",l.position="absolute",l.top=0,l.left=this.position+"%",i.appendChild(r),this.el=r,this.initEvents(),this.cpFn=o&&o(this),r}}}]),t}();e.default=a}])},851:(t,e,i)=>{"use strict";i.r(e)},539:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});class o{constructor(t){this.m=t}changeTop(){const t=this.getCoordinateInput(this.m.dom.top_input);isNaN(t)||(this.m.bounds.top=t,this.updateBottomProportionally())}changeLeft(){const t=this.getCoordinateInput(this.m.dom.left_input);isNaN(t)||(this.m.bounds.left=t,this.updateRightProportionally())}changeBottom(){const t=this.getCoordinateInput(this.m.dom.bottom_input);isNaN(t)||(this.m.bounds.bottom=t,this.updateRightProportionally())}changeRight(){const t=this.getCoordinateInput(this.m.dom.right_input);isNaN(t)||(this.m.bounds.right=t,this.updateBottomProportionally())}round(t){return Math.round(1e10*t)/1e10}validateCoordinateInputs(){const t=[this.m.dom.top_input,this.m.dom.left_input,this.m.dom.bottom_input,this.m.dom.right_input].map((t=>parseFloat(t.value)));for(let e of t)if(isNaN(e))return;this.m.bounds.is_valid=!0,this.m.dom.update_button.disabled=!1}getCoordinateInput(t){const e=parseFloat(t.value);return isNaN(e)?(this.m.bounds.is_valid=!1,t.classList.add("invalid"),this.m.dom.update_button.disabled=!0):t.classList.contains("invalid")&&(t.classList.remove("invalid"),this.validateCoordinateInputs()),e}updateRightProportionally(){const t=this.m.bounds.top-this.m.bounds.bottom;this.m.bounds.right=this.m.bounds.left+t*this.m.dom.canvas.width/this.m.dom.canvas.height,this.m.dom.right_input.value=this.round(this.m.bounds.right)}updateBottomProportionally(){const t=this.m.bounds.right-this.m.bounds.left;this.m.bounds.bottom=this.m.bounds.top-t*this.m.dom.canvas.height/this.m.dom.canvas.width,this.m.dom.bottom_input.value=this.round(this.m.bounds.bottom)}}},288:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var o=i(603);class n{constructor(t){this.m=t}update(t=!0){this.toggleUI(!1),this.m.overlay_ctx.clearRect(0,0,this.m.dom.canvas.width,this.m.dom.canvas.height),this.m.dom.auto_adjust_detail.checked&&this.autoUpdateColorLevels(),setTimeout((()=>{this.displayCanvas(t)}),50)}getDetailLevel(){const t=this.m.bounds.left,e=this.m.bounds.right;let i=Math.round(Math.log(Math.abs(1/(t-e)))/Math.log(3.5)+2);return i=Math.min(i,this.m.detail_levels.length),i=Math.max(i,1),this.m.detail_levels[i-1]}displayCanvas(t){const e=performance.now();this.m.image.update(t);const i=performance.now();this.m.dom.status.innerText=`Render time: ${((i-e)/1e3).toFixed(5)}s`,this.m.mouse.up.x=this.m.mouse.up.y=this.m.mouse.down.x=this.m.mouse.down.y=0,this.m.selection.x1=this.m.selection.y1=this.m.selection.x2=this.m.selection.y2=0,this.toggleUI(!0)}toggleUI(t){this.m.dom.overlay.style.cursor=t?"crosshair":"wait",this.m.dom.menu.style.cursor=t?"default":"wait",this.m.dom.menu_inputs.forEach((e=>e.disabled=!t));(t?o.Cp:o.$Z)(this.m.dom.working_message)}autoUpdateColorLevels(){const t=this.getDetailLevel();t!=parseInt(this.m.dom.detail_level_input.value)&&(this.m.dom.detail_level_input.value=t,this.m.image.setDetail(t))}}},271:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});class o{constructor({gradient:t,stop_min:e,stop_max:i}){this.gradient=t,this.stop_min=e,this.stop_max=i}getData(){return this.gradient}setData(t){this.gradient=t}makeColorMap(t,e){const i=this.convert(t);let o=[];return i.forEach((({index:t,color:e},n)=>{if(0===n)return;let{index:s,color:a}=i[n-1];const r=t-s,l=[0,1,2].map((t=>(e[t]-a[t])/r));for(let t=0;t<r;t++)o.push(...a.map(Math.round)),a=a.map(((t,e)=>t+l[e]))})),o.push(...i[i.length-1].color,...e),o}convert(t){let e=[];return this.gradient[0].stop!=this.stop_min&&e.push({index:0,color:this.gradient[0].color}),this.gradient.forEach((({stop:i,color:o})=>e.push({index:Math.round(t*(i/this.stop_max)),color:o}))),e[e.length-1].index!==t-1&&e.push({index:t-1,color:this.gradient[this.gradient.length-1].color}),e}}},801:(t,e,i)=>{"use strict";i.a(t,(async t=>{i.d(e,{Z:()=>a});var o=i(603),n=i(453),s=t([n]);n=(s.then?await s:s)[0];class a{ITER_SCALE=64;dirty=!1;constructor({detail:t,model:e}){this.max_iters=this.ITER_SCALE*t,this.m=e,this.colormap=[],this.image=new Image,this.setSize()}setSize(){const t=this.m.dom.canvas.width,e=this.m.dom.canvas.height;this.image_data=this.m.ctx.createImageData(t,e),this.iter_values=new Uint32Array(t*e)}setColorMap(){this.colormap=this.m.gradient.makeColorMap(this.max_iters,this.m.interior_color)}setColorMapInterior(t){this.colormap.splice(-3,3,...t),this.updateColors()}setDetail(t){const e=this.ITER_SCALE*t,i=this.max_iters!==e;return i&&(this.max_iters=e,this.setColorMap()),i}drawMovedImage(t,e){this.image.src&&(this.m.ctx.clearRect(0,0,this.m.dom.canvas.width,this.m.dom.canvas.height),this.m.ctx.drawImage(this.image,t.x-e.x,t.y-e.y))}update(t){this.dirty=!t;const e=this.m.dom.canvas.width,i=this.m.dom.canvas.height;t||(this.image_data=this.m.ctx.getImageData(0,0,e,i)),n.U(t,e,i,(0,o.fJ)(this.m.bounds,e),(0,o.qX)(this.m.bounds,i),this.m.bounds.top,this.m.bounds.left,this.max_iters,this.image_data.data,this.iter_values),this.setImageData(t),this.postUpdate()}updateColors(){this.dirty?this.update(!0):(this.setImageData(!0),this.postUpdate())}postUpdate(){this.m.ctx.putImageData(this.image_data,0,0),this.image.src=this.m.dom.canvas.toDataURL()}setImageData(t){let e=0,i=0;for(;i<this.iter_values.length;){if(t||255!=this.image_data.data[e+3]){const t=3*this.iter_values[i];this.image_data.data[e]=this.colormap[t],this.image_data.data[e+1]=this.colormap[t+1],this.image_data.data[e+2]=this.colormap[t+2],this.image_data.data[e+3]=255}e+=4,i++}}}}))},446:(t,e,i)=>{"use strict";i.a(t,(async t=>{var e=i(9),o=i.n(e),n=i(271),s=i(801),a=i(288),r=i(250),l=i(539),u=i(566),h=i(866),d=i(603),c=t([s]);s=(c.then?await c:c)[0],i(851);const m=document.getElementById.bind(document),p=document.addEventListener.bind(document),v=document.querySelectorAll.bind(document);function g(){const t={canvas:m("mandelbrot-canvas"),menu:m("options-menu"),menu_closed:m("open-menu"),overlay:m("overlay"),status:m("status-message"),coords:m("coords"),working_message:m("working-message"),left_input:m("left"),right_input:m("right"),top_input:m("top"),bottom_input:m("bottom"),zoom_inputs:m("manual-zoom-inputs"),update_button:m("update"),detail_level_input:m("detail-level"),auto_adjust_detail:m("auto-adjust-detail"),color_input:m("interior-color"),menu_inputs:[...v("#options-menu input")],menu_section_headers:[...v("#options-menu > section > h1")]},e={left:-1.79,right:.505,top:1.15,bottom:-1.145},i={dom:t,gradient_picker:new(o())({el:"#gradientslider"}),interior_color:[0,0,0],gradient:new n.Z({gradient:[{stop:0,color:[29,19,52]},{stop:8,color:[99,28,93]},{stop:16,color:[18,170,243]},{stop:25,color:[221,172,218]},{stop:34,color:[66,255,63]},{stop:42,color:[145,15,8]},{stop:50,color:[51,8,145]},{stop:58,color:[119,238,236]},{stop:66,color:[242,247,94]},{stop:74,color:[247,94,133]},{stop:82,color:[178,94,247]},{stop:90,color:[61,74,199]},{stop:99,color:[34,99,43]}],stop_min:0,stop_max:100}),selection:{x1:0,y1:0,x2:0,y2:0},bounds:{...e,is_valid:!0},initial_bounds:e,mouse:{down:{x:0,y:0},up:{x:0,y:0},is_down:!1,is_shift:!1},ctx:t.canvas.getContext("2d"),overlay_ctx:t.overlay.getContext("2d"),detail_levels:[...v("#detail-level option")].map((t=>parseInt(t.value)))};function c(){const e=t.canvas.parentElement.offsetWidth;t.canvas.width=e,t.canvas.height=e,t.overlay.width=e,t.overlay.height=e,t.working_message.style.height=`${e}px`,t.working_message.style.lineHeight=`${e}px`,i.overlay_ctx.fillStyle="rgba(0,0,0,0)",i.overlay_ctx.fillRect(0,0,e,e)}function g(){t.canvas.width!==t.canvas.parentElement.offsetWidth&&(c(),i.image.setSize(),i.display.update())}c(),i.image=new s.Z({detail:1,model:i}),i.display=new a.Z(i),i.listeners={mouse:new r.Z(i),coord:new l.Z(i),zoom:new u.Z(i),misc:new h.Z(i)},(0,d.js)(t,i.bounds),t.auto_adjust_detail.checked=!0,t.detail_level_input.value=i.detail_levels[0],t.detail_level_input.disabled=!0,t.color_input.value="#000000",i.gradient_picker.on("handler:add",(t=>{t.getEl().querySelector(".grp-handler-close").innerHTML="&times;"})),i.gradient.getData().forEach((({stop:t,color:e})=>{const o="#".concat(...e.map((t=>t.toString(16).padStart(2,"0"))));i.gradient_picker.addHandler(t,o,!1)})),window.addEventListener("resize",(t=>{i.resizing_pid&&clearTimeout(i.resizing_pid),i.resizing_pid=setTimeout(g,200)}),!0),t.overlay.addEventListener("mousedown",(t=>i.listeners.mouse.onDown(t))),t.overlay.addEventListener("mouseup",(t=>i.listeners.mouse.onUp(t))),t.overlay.addEventListener("mousemove",(t=>i.listeners.mouse.onMove(t))),t.menu_closed.addEventListener("click",(()=>{(0,d.$Z)(t.menu),(0,d.Cp)(t.menu_closed)})),m("close-menu").addEventListener("click",(()=>{(0,d.Cp)(t.menu),(0,d.$Z)(t.menu_closed)})),t.menu_section_headers.forEach((e=>{e.addEventListener("click",(e=>{t.menu_section_headers.forEach((t=>t.closest("section").classList.remove("active"))),e.target.closest("section").classList.add("active")}))})),t.left_input.addEventListener("keyup",(()=>i.listeners.coord.changeLeft())),t.right_input.addEventListener("keyup",(()=>i.listeners.coord.changeRight())),t.top_input.addEventListener("keyup",(()=>i.listeners.coord.changeTop())),t.bottom_input.addEventListener("keyup",(()=>i.listeners.coord.changeBottom())),t.zoom_inputs.addEventListener("keydown",(t=>{(0,d.ot)(t,"Enter")&&i.bounds.is_valid&&i.display.update()})),t.auto_adjust_detail.addEventListener("change",(()=>i.listeners.misc.changeAutoDetail())),t.detail_level_input.addEventListener("change",(()=>i.listeners.misc.changeDetailLevel())),t.color_input.addEventListener("change",(()=>i.listeners.misc.changeInteriorColor())),t.update_button.addEventListener("click",(()=>{i.bounds.is_valid&&i.display.update()})),m("zoom").addEventListener("click",(()=>i.listeners.zoom.onZoom())),m("zoomout").addEventListener("click",(()=>i.listeners.zoom.onZoomOut())),m("reset").addEventListener("click",(()=>i.listeners.zoom.onReset())),m("save-button").addEventListener("click",(()=>i.listeners.misc.saveCanvas())),p("keydown",(e=>{(0,d.ot)(e,"Shift")&&(t.overlay.style.cursor="move")})),p("keyup",(e=>{(0,d.ot)(e,"Shift")&&(t.overlay.style.cursor="crosshair")})),i.gradient_picker.on("change",(t=>i.listeners.misc.changeGradient(t))),i.gradient_picker.el.addEventListener("click",(t=>{t.target.classList.contains("grp-handler-close")&&1===i.gradient_picker.handlers.length&&t.stopPropagation()}),!0),i.image.setColorMap(),i.display.update()}"loading"!==document.readyState?g():p("DOMContentLoaded",g)}))},866:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var o=i(603);class n{constructor(t){this.m=t}changeDetailLevel(){const t=parseInt(this.m.dom.detail_level_input.value);this.m.image.setDetail(t)&&setTimeout((()=>this.m.display.update()),1)}changeAutoDetail(){this.m.dom.detail_level_input.disabled=this.m.dom.auto_adjust_detail.checked,this.m.dom.auto_adjust_detail.checked&&this.m.display.update()}changeInteriorColor(){const t=(0,o.wK)(this.m.dom.color_input.value);(0,o.Dg)(this.m.interior_color,t)||(this.m.interior_color=t,this.m.image.setColorMapInterior(t))}changeGradient(t){if(!t)return;let e=this.m.gradient_picker.handlers;e.sort(((t,e)=>t.position-e.position)),this.m.gradient.setData(e.map((t=>({stop:t.getPosition(),color:this.getHandlerColor(t)})))),this.m.image.setColorMap(),this.m.image.updateColors()}saveCanvas(){const t=document.createElement("a");t.href=this.m.dom.canvas.toDataURL("image/png"),t.download="mandelbrot.png",t.style.display="none",document.body.appendChild(t),t.click(),t.remove()}getHandlerColor(t){let e=t.getColor();if("rgb"===e.substr(0,3))return/^rgba?\((\d+), (\d+), (\d+)/.exec(e).slice(1).map(Number);if("#"!==e.substr(0,1)){const t=this.m.ctx,i=t.fillStyle;t.fillStyle=e,e=t.fillStyle,t.fillStyle=i}return(0,o.wK)(e)}}},250:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var o=i(603);class n{constructor(t){this.m=t,this.height_scale=this.m.dom.canvas.height/this.m.dom.canvas.width,this.canvas_offset=(0,o.cv)(this.m.dom.canvas)}onDown(t){if(2===t.button&&((0,o.Cp)(this.m.dom.overlay),setTimeout((()=>(0,o.$Z)(this.m.dom.overlay)),1)),0!==t.button)return;this.m.overlay_ctx.clearRect(0,0,this.m.dom.canvas.width,this.m.dom.canvas.height),this.canvas_offset=(0,o.cv)(this.m.dom.canvas);const e=this.getCanvasMousePos(t);e.x>this.m.selection.x1&&e.x<this.m.selection.x2&&e.y>this.m.selection.y1&&e.y<this.m.selection.y2?this.m.listeners.zoom.onZoom():(this.m.mouse.is_down=!0,t.shiftKey&&(this.m.mouse.is_shift=!0),this.m.selection.x1=this.m.selection.x2=this.m.mouse.down.x=this.m.mouse.up.x=e.x,this.m.selection.y1=this.m.selection.y2=this.m.mouse.down.y=this.m.mouse.up.y=e.y)}onUp(t){if(0!==t.button||!this.m.mouse.is_down)return;const e=this.getCanvasMousePos(t);if(this.m.mouse.up.x=e.x,this.m.mouse.up.y=e.y,this.m.selection.x2>this.m.selection.x1)this.drawSelectionBoxLabel();else if(this.m.mouse.is_shift&&this.m.mouse.down.x!==this.m.mouse.up.x&&this.m.mouse.down.y!==this.m.mouse.up.y){const t=(0,o.fJ)(this.m.bounds,this.m.dom.canvas.width),e=(0,o.qX)(this.m.bounds,this.m.dom.canvas.height),i=(this.m.mouse.up.x-this.m.mouse.down.x)*t,n=(this.m.mouse.up.y-this.m.mouse.down.y)*e;this.m.bounds.left-=i,this.m.bounds.right-=i,this.m.bounds.top+=n,this.m.bounds.bottom+=n,(0,o.js)(this.m.dom,this.m.bounds),this.m.display.update(!1)}this.m.mouse.is_shift=!1,this.m.mouse.is_down=!1}onMove(t){const e=this.getCanvasMousePos(t);if(this.showCoords(e),!this.m.mouse.is_down)return;if(this.m.mouse.is_shift)return void this.m.image.drawMovedImage(e,this.m.mouse.down);const i=this.m.selection,o=this.m.mouse.down.x,n=this.m.mouse.down.y,s=Math.abs(e.x-o)*this.height_scale;i.y1=i.y2=n,e.y>=n?(i.y2+=s,e.x>=o?(i.x1=o,i.x2=e.x):(i.x1=e.x,i.x2=o)):(i.y1-=s,e.x>=o?(i.x1=o,i.x2=e.x):(i.x1=e.x,i.x2=o)),this.drawUpdatedSelectionBox()}drawSelectionBoxLabel(){const t=this.m.selection.x2,e=this.m.selection.y2,i=this.m.overlay_ctx;i.font="normal 11px Arial,Helvetica,sans-serif",i.fillStyle="rgba(0, 0, 0, 0.7)",i.fillRect(t-43,e+3,105,19),i.textBaseline="top",i.fillStyle="#fff",i.fillText("Click inside to zoom",t-40,e+6)}getCanvasMousePos(t){return{x:t.pageX-this.canvas_offset.left,y:t.pageY-this.canvas_offset.top}}showCoords(t){const e=(0,o.fJ)(this.m.bounds,this.m.dom.canvas.width),i=this.m.bounds.left+t.x*e,n=this.m.bounds.top-t.y*e;this.m.dom.coords.innerText=`(${i}, ${n})`}drawUpdatedSelectionBox(){const t=this.m.overlay_ctx,e=this.m.selection;e.x2>e.x1&&t.clearRect(0,0,this.m.dom.canvas.width,this.m.dom.canvas.height),t.strokeStyle="rgba(0, 0, 0, 1)";const i=e.x2-e.x1,o=e.y2-e.y1;t.strokeRect(e.x1,e.y1,i,o),t.strokeStyle="rgba(255, 255, 255, 1)",t.strokeRect(e.x1+1,e.y1+1,i-1,o-1)}}},603:(t,e,i)=>{"use strict";function o(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX}}function n(t){return"#"==t.substr(0,1)&&(t=t.substr(1)),[0,1,2].map((e=>parseInt(t.substr(2*e,2),16)))}function s(t,e){return!(t.isComposing||229===t.keyCode)&&t.key===e}function a(t,e){return(t.right-t.left)/e}function r(t,e){return(t.top-t.bottom)/e}function l(t,e){t.left_input.value=e.left,t.right_input.value=e.right,t.top_input.value=e.top,t.bottom_input.value=e.bottom}function u(t){t.style.display="block"}function h(t){t.style.display="none"}function d(t,e){return t.every(((t,i)=>t===e[i]))}i.d(e,{cv:()=>o,wK:()=>n,ot:()=>s,fJ:()=>a,qX:()=>r,js:()=>l,$Z:()=>u,Cp:()=>h,Dg:()=>d})},453:(t,e,i)=>{"use strict";i.a(t,(async t=>{i.d(e,{U:()=>h});var o=i(967),n=t([o]);o=(n.then?await n:n)[0];let s=new Uint8Array;let a=0;function r(t,e){const i=e(1*t.length);return(0===s.byteLength&&(s=new Uint8Array(o.memory.buffer)),s).set(t,i/1),a=t.length,i}let l=new Uint32Array;function u(){return 0===l.byteLength&&(l=new Uint32Array(o.memory.buffer)),l}function h(t,e,i,n,s,l,h,d,c,m){try{const g=r(c,o.__wbindgen_malloc),f=a;var p=function(t,e){const i=e(4*t.length);return u().set(t,i/4),a=t.length,i}(m,o.__wbindgen_malloc),v=a;o.iterate(t,e,i,n,s,l,h,d,g,f,p,v)}finally{m.set(u().subarray(p/4,p/4+v)),o.__wbindgen_free(p,4*v)}}}))},967:(t,e,i)=>{"use strict";t.exports=i.v(e,t.id,"cb40d600d37a45bf00a3")},566:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var o=i(603);class n{constructor(t){this.m=t}onZoom(){if(this.m.selection.x1<this.m.selection.x2){const t=(0,o.fJ)(this.m.bounds,this.m.dom.canvas.width),e=(0,o.qX)(this.m.bounds,this.m.dom.canvas.height);this.m.bounds.left=this.m.bounds.left+this.m.selection.x1*t,this.m.bounds.right=this.m.bounds.left+(this.m.selection.x2-this.m.selection.x1)*t,this.m.bounds.top=this.m.bounds.top-this.m.selection.y1*e,this.m.bounds.bottom=this.m.bounds.top-(this.m.selection.y2-this.m.selection.y1)*e}else{let t=(this.m.bounds.right-this.m.bounds.left)/4,e=(this.m.bounds.top-this.m.bounds.bottom)/4;this.m.bounds.left+=t,this.m.bounds.right-=t,this.m.bounds.top-=e,this.m.bounds.bottom+=e}(0,o.js)(this.m.dom,this.m.bounds),this.m.display.update()}onZoomOut(){let t=(this.m.bounds.right-this.m.bounds.left)/2,e=(this.m.bounds.top-this.m.bounds.bottom)/2;this.m.bounds.left-=t,this.m.bounds.right+=t,this.m.bounds.top+=e,this.m.bounds.bottom-=e,(0,o.js)(this.m.dom,this.m.bounds),this.m.display.update()}onReset(){this.m.dom.left_input.value=this.m.bounds.left=this.m.initial_bounds.left,this.m.dom.right_input.value=this.m.bounds.right=this.m.initial_bounds.right,this.m.dom.top_input.value=this.m.bounds.top=this.m.initial_bounds.top,this.m.dom.bottom_input.value=this.m.bounds.bottom=this.m.initial_bounds.bottom,parseInt(1!==this.m.dom.detail_level_input.value)&&(this.m.dom.detail_level_input.value=1,this.m.image.setDetail(1)),this.m.display.update()}}}},a={};function r(t){var e=a[t];if(void 0!==e)return e.exports;var i=a[t]={id:t,exports:{}};return s[t].call(i.exports,i,i.exports,r),i.exports}t="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",i=t=>{t&&(t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},o=t=>!--t.r&&t(),n=(t,e)=>t?t.push(e):o(e),r.a=(s,a,r)=>{var l,u,h,d=r&&[],c=s.exports,m=!0,p=!1,v=(e,i,o)=>{p||(p=!0,i.r+=e.length,e.map(((e,n)=>e[t](i,o))),p=!1)},g=new Promise(((t,e)=>{h=e,u=()=>(t(c),i(d),d=0)}));g[e]=c,g[t]=(t,e)=>{if(m)return o(t);l&&v(l,t,e),n(d,t),g.catch(e)},s.exports=g,a((s=>{if(!s)return u();var a,r;l=(s=>s.map((s=>{if(null!==s&&"object"==typeof s){if(s[t])return s;if(s.then){var a=[];s.then((t=>{r[e]=t,i(a),a=0}));var r={};return r[t]=(t,e)=>(n(a,t),s.catch(e)),r}}var l={};return l[t]=t=>o(t),l[e]=s,l})))(s);var h=new Promise(((t,i)=>{(a=()=>t(r=l.map((t=>t[e])))).r=0,v(l,a,i)}));return a.r?h:r})).then(u,h),m=!1},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.p="/static/",r.v=(t,e,i,o)=>{var n=fetch(r.p+""+i+".module.wasm");return"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(n,o).then((e=>Object.assign(t,e.instance.exports))):n.then((t=>t.arrayBuffer())).then((t=>WebAssembly.instantiate(t,o))).then((e=>Object.assign(t,e.instance.exports)))};r(446)})();