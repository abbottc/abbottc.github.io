(()=>{var t,e,i,n,o={9:function(t){"undefined"!=typeof self&&self,t.exports=function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,i){"use strict";function n(t,e,i){e=e.split(/\s+/);for(var n=0;n<e.length;++n)t.addEventListener(e[n],i)}function o(t,e,i){e=e.split(/\s+/);for(var n=0;n<e.length;++n)t.removeEventListener(e[n],i)}Object.defineProperty(e,"__esModule",{value:!0}),e.on=n,e.off=o,e.isFunction=function(t){return"function"==typeof t},e.isDef=function(t){return void 0!==t},e.getPointerEvent=function(t){return t.touches&&t.touches[0]||t}},function(t,e,i){"use strict";var n=function(t){return t&&t.__esModule?t:{default:t}}(i(2));t.exports=function(t){return new n.default(t)}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=n(i(3)),c=n(i(4)),d=i(0),u=function(t,e){return t.position-e.position},p=function(t){return t+"-gradient("},m=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t=Object.assign({},t);var n={pfx:"grp",el:".grp",colorEl:"",min:0,max:100,direction:"90deg",type:"linear",height:"30px",width:"100%",emptyColor:"#000",onValuePos:function(t){return parseInt(t)}};for(var o in n)o in t||(t[o]=n[o]);var r=t.el;if(!((r="string"==typeof r?document.querySelector(r):r)instanceof HTMLElement))throw"Element not found, given "+r;return i.el=r,i.handlers=[],i.options=t,i.on("handler:color:change",(function(t,e){return i.change(e)})),i.on("handler:position:change",(function(t,e){return i.change(e)})),i.on("handler:remove",(function(t){return i.change(1)})),i.on("handler:add",(function(t){return i.change(1)})),i.render(),i}return r(e,t),l(e,[{key:"destroy",value:function(){var t=this;this.clear(),this.e={},["el","handlers","options","colorPicker"].forEach((function(e){return t[e]=0})),["previewEl","wrapperEl","sandEl"].forEach((function(e){var i=t[e];i&&i.parentNode&&i.parentNode.removeChild(i),delete t[e]}))}},{key:"setColorPicker",value:function(t){this.colorPicker=t}},{key:"getValue",value:function(t,e){var i=this.getColorValue(),n=t||this.getType(),o=["top","left","bottom","right","center"],s=e||this.getDirection();return["linear","repeating-linear"].indexOf(n)>=0&&o.indexOf(s)>=0&&(s="center"===s?"to right":"to "+s),["radial","repeating-radial"].indexOf(n)>=0&&o.indexOf(s)>=0&&(s="circle at "+s),i?n+"-gradient("+s+", "+i+")":""}},{key:"getSafeValue",value:function(t,e){var i=this.previewEl,n=this.getValue(t,e);if(!this.sandEl&&(this.sandEl=document.createElement("div")),!i||!n)return"";for(var s=this.sandEl.style,a=[n].concat(o(this.getPrefixedValues(t,e))),r=void 0,l=0;l<a.length&&(r=a[l],s.backgroundImage=r,s.backgroundImage!=r);l++);return s.backgroundImage}},{key:"setValue",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.type,o=this.direction,s=e.indexOf("(")+1,a=e.lastIndexOf(")"),r=e.substring(s,a),l=r.split(/,(?![^(]*\)) /);if(this.clear(i),r){l.length>2&&(o=l.shift());var h=void 0;["repeating-linear","repeating-radial","linear","radial"].forEach((function(t){e.indexOf(p(t))>-1&&!h&&(h=1,n=t)})),this.setDirection(o,i),this.setType(n,i),l.forEach((function(e){var n=e.split(" "),o=parseFloat(n.pop()),s=n.join("");t.addHandler(o,s,0,i)})),this.updatePreview()}else this.updatePreview()}},{key:"getColorValue",value:function(){var t=this.handlers;return t.sort(u),(t=1==t.length?[t[0],t[0]]:t).map((function(t){return t.getValue()})).join(", ")}},{key:"getPrefixedValues",value:function(t,e){var i=this.getValue(t,e);return["-moz-","-webkit-","-o-","-ms-"].map((function(t){return""+t+i}))}},{key:"change",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.updatePreview(),!e.silent&&this.emit("change",t)}},{key:"setDirection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.options.direction=t;var i=e.complete,n=void 0===i?1:i;this.change(n,e)}},{key:"getDirection",value:function(){return this.options.direction}},{key:"setType",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.options.type=t;var i=e.complete,n=void 0===i?1:i;this.change(n,e)}},{key:"getType",value:function(){return this.options.type}},{key:"addHandler",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=new c.default(this,t,e,i,n);return!n.silent&&this.emit("handler:add",o),o}},{key:"getHandler",value:function(t){return this.handlers[t]}},{key:"getHandlers",value:function(){return this.handlers}},{key:"clear",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.handlers,i=e.length-1;i>=0;i--)e[i].remove(t)}},{key:"getSelected",value:function(){for(var t=this.getHandlers(),e=0;e<t.length;e++){var i=t[e];if(i.isSelected())return i}return null}},{key:"updatePreview",value:function(){var t=this.previewEl;t&&(t.style.backgroundImage=this.getValue("linear","to right"))}},{key:"initEvents",value:function(){var t=this,e=this.previewEl;e&&(0,d.on)(e,"click",(function(i){var n=t.options,o=n.min,s=n.max,a={w:e.clientWidth,h:e.clientHeight},r=i.offsetX-e.clientLeft,l=i.offsetY-e.clientTop,h=r/a.w*100;if(!(h>s||h<o||l>a.h||l<0)){var c=document.createElement("canvas"),d=c.getContext("2d");c.width=a.w,c.height=a.h;var u=d.createLinearGradient(0,0,a.w,a.h);t.getHandlers().forEach((function(t){return u.addColorStop(t.position/100,t.color)})),d.fillStyle=u,d.fillRect(0,0,c.width,c.height),c.style.background="black";var p=c.getContext("2d").getImageData(r,l,1,1).data,m="rgba("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+")",v="rgba(0, 0, 0, 0)"==m?n.emptyColor:m;t.addHandler(h,v)}}))}},{key:"render",value:function(){var t=this.options,e=this.el,i=t.pfx,n=t.height,o=t.width;if(e){var s=i+"-wrapper",a=i+"-preview";e.innerHTML='\n      <div class="'+s+'">\n        <div class="'+a+'"></div>\n      </div>\n    ';var r=e.querySelector("."+s),l=e.querySelector("."+a),h=r.style;h.position="relative",this.wrapperEl=r,this.previewEl=l,n&&(h.height=n),o&&(h.width=o),this.initEvents(),this.updatePreview()}}}]),e}(h.default);e.default=m},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(){n(this,t)}return o(t,[{key:"on",value:function(t,e,i){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:i}),this}},{key:"once",value:function(t,e,i){function n(){o.off(t,n),e.apply(i,arguments)}var o=this;return n._=e,this.on(t,n,i)}},{key:"emit",value:function(t){for(var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),n=0,o=i.length;n<o;n++)i[n].fn.apply(i[n].ctx,e);return this}},{key:"off",value:function(t,e){var i=this.e||(this.e={}),n=i[t],o=[];if(n&&e)for(var s=0,a=n.length;s<a;s++)n[s].fn!==e&&n[s].fn._!==e&&o.push(n[s]);return o.length?i[t]=o:delete i[t],this}}]),t}();e.default=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(0),a=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"black",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};n(this,t),e.getHandlers().push(this),this.gp=e,this.position=i,this.color=o,this.selected=0,this.render(),s&&this.select(a)}return o(t,[{key:"toJSON",value:function(){return{position:this.position,selected:this.selected,color:this.color}}},{key:"setColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.color=t,this.emit("handler:color:change",this,e)}},{key:"setPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.getEl();this.position=t,i&&(i.style.left=t+"%"),this.emit("handler:position:change",this,e)}},{key:"getColor",value:function(){return this.color}},{key:"getPosition",value:function(){var t=this.position,e=this.gp.options.onValuePos;return(0,s.isFunction)(e)?e(t):t}},{key:"isSelected",value:function(){return!!this.selected}},{key:"getValue",value:function(){return this.getColor()+" "+this.getPosition()+"%"}},{key:"select",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getEl(),i=this.gp.getHandlers();!t.keepSelect&&i.forEach((function(t){return t.deselect()})),this.selected=1;var n=this.getSelectedCls();e&&(e.className+=" "+n),this.emit("handler:select",this)}},{key:"deselect",value:function(){var t=this.getEl();this.selected=0;var e=this.getSelectedCls();t&&(t.className=t.className.replace(e,"").trim()),this.emit("handler:deselect",this)}},{key:"getSelectedCls",value:function(){return this.gp.options.pfx+"-handler-selected"}},{key:"remove",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.cpFn,n=this.getEl(),o=this.gp.getHandlers(),a=o.splice(o.indexOf(this),1)[0];return n&&n.parentNode.removeChild(n),!e.silent&&this.emit("handler:remove",a),(0,s.isFunction)(i)&&i(this),["el","gp"].forEach((function(e){return t[e]=0})),a}},{key:"getEl",value:function(){return this.el}},{key:"initEvents",value:function(){var t=this,e=this.getEl(),i=this.gp.previewEl,n=this.gp.options,o=n.min,a=n.max,r=e.querySelector("[data-toggle=handler-close]"),l=e.querySelector("[data-toggle=handler-color-c]"),h=e.querySelector("[data-toggle=handler-color-wrap]"),c=e.querySelector("[data-toggle=handler-color]"),d=e.querySelector("[data-toggle=handler-drag]"),u=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.target.value;t.setColor(n,i),h&&(h.style.backgroundColor=n)};if(l&&(0,s.on)(l,"click",(function(t){return t.stopPropagation()})),r&&(0,s.on)(r,"click",(function(e){e.stopPropagation(),t.remove()})),c&&((0,s.on)(c,"change",u),(0,s.on)(c,"input",(function(t){return u(t,0)}))),d){var p=0,m=0,v=0,f={},g={},y={},_=function(e){var i=(0,s.getPointerEvent)(e);v=1,y.x=i.clientX-g.x,y.y=i.clientY-g.y,p=100*y.x,p/=f.w,p=(p=(p=m+p)<o?o:p)>a?a:p,t.setPosition(p,0),t.emit("handler:drag",t,p),(0,s.isDef)(e.button)&&0===e.which&&b(e)},b=function e(i){(0,s.off)(document,"touchmove mousemove",_),(0,s.off)(document,"touchend mouseup",e),v&&(v=0,t.setPosition(p),t.emit("handler:drag:end",t,p))},x=function(e){if(!(0,s.isDef)(e.button)||0===e.button){t.select();var n=(0,s.getPointerEvent)(e);m=t.position,f.w=i.clientWidth,f.h=i.clientHeight,g.x=n.clientX,g.y=n.clientY,(0,s.on)(document,"touchmove mousemove",_),(0,s.on)(document,"touchend mouseup",b),t.emit("handler:drag:start",t)}};(0,s.on)(d,"touchstart mousedown",x),(0,s.on)(d,"click",(function(t){return t.stopPropagation()}))}}},{key:"emit",value:function(){var t;(t=this.gp).emit.apply(t,arguments)}},{key:"render",value:function(){var t=this.gp,e=t.options,i=t.previewEl,n=t.colorPicker,o=e.pfx,s=e.colorEl,a=this.getColor();if(i){var r=document.createElement("div"),l=r.style,h=o+"-handler";return r.className=h,r.innerHTML='\n      <div class="'+h+'-close-c">\n        <div class="'+h+'-close" data-toggle="handler-close">&Cross;</div>\n      </div>\n      <div class="'+h+'-drag" data-toggle="handler-drag"></div>\n      <div class="'+h+'-cp-c" data-toggle="handler-color-c">\n        '+(s||'\n          <div class="'+h+'-cp-wrap" data-toggle="handler-color-wrap" style="background-color: '+a+'">\n            <input type="color" data-toggle="handler-color" value="'+a+'">\n          </div>')+"\n      </div>\n    ",l.position="absolute",l.top=0,l.left=this.position+"%",i.appendChild(r),this.el=r,this.initEvents(),this.cpFn=n&&n(this),r}}}]),t}();e.default=a}])},851:(t,e,i)=>{"use strict";i.r(e)},435:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});class n{constructor(t){this.INITIAL={left:-1.79,right:.505,top:1.15,bottom:-1.145},this.m=t,this.inputs={x:document.getElementById("centerx"),y:document.getElementById("centery"),radius:document.getElementById("radius"),update:document.getElementById("update")},this.reset(),this.is_valid=!0,this.inputs.x.addEventListener("keyup",(()=>this._validate(this.inputs.x))),this.inputs.y.addEventListener("keyup",(()=>this._validate(this.inputs.y))),this.inputs.radius.addEventListener("keyup",(()=>this._validateRadius())),this.inputs.update.addEventListener("click",(()=>this._onUpdate()))}offsetBy(t){this.left+=t.left,this.right+=t.right,this.top+=t.top,this.bottom+=t.bottom,this._syncCoordInputs()}reset(){this.left=this.INITIAL.left,this.right=this.INITIAL.right,this.top=this.INITIAL.top,this.bottom=this.INITIAL.bottom,this._syncCoordInputs()}_onUpdate(){if(this.is_valid){const t=parseFloat(this.inputs.radius.value),e=this.m.dom.canvas.width,i=this.m.dom.canvas.height,n=e!==i?t*(i/e):t;this.left=parseFloat(this.inputs.x.value)-t,this.right=parseFloat(this.inputs.x.value)+t,this.top=parseFloat(this.inputs.y.value)+n,this.bottom=parseFloat(this.inputs.y.value)-n,this.m.display.update()}}_syncCoordInputs(){const t=(this.right-this.left)/2;this.inputs.x.value=this._round(this.left+t),this.inputs.y.value=this._round(this.bottom+(this.top-this.bottom)/2),this.inputs.radius.value=this._round(t)}_validateRadius(){const t=this._validate(this.inputs.radius);!isNaN(t)&&t<=0&&(this.is_valid=!1,this.inputs.radius.classList.add("invalid"),this.inputs.update.disabled=!0)}_round(t){return Math.round(1e10*t)/1e10}_validateAll(){[this.inputs.x,this.inputs.y,this.inputs.radius].some((t=>isNaN(parseFloat(t.value))))||parseFloat(this.inputs.radius)<=0||(this.is_valid=!0,this.inputs.update.disabled=!1)}_validate(t){const e=parseFloat(t.value);return isNaN(e)?(this.is_valid=!1,t.classList.add("invalid"),this.inputs.update.disabled=!0):t.classList.contains("invalid")&&(t.classList.remove("invalid"),this._validateAll()),e}}},288:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(603);class o{constructor(t){this.m=t}update(t=!0){this.toggleUI(!1),this.m.pointer.clearSelectionBox(),this.m.dom.auto_adjust_detail.checked&&this.autoUpdateColorLevels(),setTimeout((()=>{this.displayCanvas(t)}),50)}getDetailLevel(){const t=this.m.bounds.left,e=this.m.bounds.right;let i=Math.round(Math.log(Math.abs(1/(t-e)))/Math.log(3.5)+2);return i=Math.min(i,this.m.detail_levels.length),i=Math.max(i,1),this.m.detail_levels[i-1]}displayCanvas(t){const e=performance.now();this.m.image.update(t);const i=performance.now();this.m.dom.status.innerText=`Render time: ${((i-e)/1e3).toFixed(5)}s`,this.m.pointer.reset(),this.toggleUI(!0)}toggleUI(t){this.m.dom.popup_inputs.forEach((e=>e.disabled=!t)),t?(this.m.pointer.changeCursorToDefault(),(0,n.Cp)(this.m.dom.working_message)):(this.m.pointer.changeCursorToWait(),(0,n.$Z)(this.m.dom.working_message))}autoUpdateColorLevels(){const t=this.getDetailLevel();t!=parseInt(this.m.dom.detail_level_input.value)&&(this.m.dom.detail_level_input.value=t,this.m.image.setDetail(t))}}},271:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});class n{constructor({gradient:t,stop_min:e,stop_max:i}){this.gradient=t,this.stop_min=e,this.stop_max=i}getData(){return this.gradient}setData(t){this.gradient=t}makeColorMap(t,e){const i=this.convert(t);let n=[];return i.forEach((({index:t,color:e},o)=>{if(0===o)return;let{index:s,color:a}=i[o-1];const r=t-s,l=[0,1,2].map((t=>(e[t]-a[t])/r));for(let t=0;t<r;t++)n.push(...a.map(Math.round)),a=a.map(((t,e)=>t+l[e]))})),n.push(...i[i.length-1].color,...e),n}convert(t){let e=[];return this.gradient[0].stop!=this.stop_min&&e.push({index:0,color:this.gradient[0].color}),this.gradient.forEach((({stop:i,color:n})=>e.push({index:Math.round(t*(i/this.stop_max)),color:n}))),e[e.length-1].index!==t-1&&e.push({index:t-1,color:this.gradient[this.gradient.length-1].color}),e}}},801:(t,e,i)=>{"use strict";i.a(t,(async(t,n)=>{try{i.d(e,{Z:()=>r});var o=i(603),s=i(453),a=t([s]);s=(a.then?(await a)():a)[0];class r{ITER_SCALE=64;dirty=!1;constructor({detail:t,model:e}){this.max_iters=this.ITER_SCALE*t,this.m=e,this.colormap=[],this.image=new Image,this.setSize()}setSize(){const t=this.m.dom.canvas.width,e=this.m.dom.canvas.height;this.image_data=this.m.ctx.createImageData(t,e),this.iter_values=new Uint32Array(t*e)}setColorMap(){this.colormap=this.m.gradient.makeColorMap(this.max_iters,this.m.interior_color)}setColorMapInterior(t){this.colormap.splice(-3,3,...t),this.updateColors()}setDetail(t){const e=this.ITER_SCALE*t,i=this.max_iters!==e;return i&&(this.max_iters=e,this.setColorMap()),i}drawMovedImage(t,e,i,n){this.image.src&&(this.m.ctx.clearRect(0,0,this.m.dom.canvas.width,this.m.dom.canvas.height),this.m.ctx.drawImage(this.image,t-i,e-n))}update(t){this.dirty=!t;const e=this.m.dom.canvas.width,i=this.m.dom.canvas.height;t||(this.image_data=this.m.ctx.getImageData(0,0,e,i)),s.U(t,e,i,(0,o.fJ)(this.m.bounds,e),(0,o.qX)(this.m.bounds,i),this.m.bounds.top,this.m.bounds.left,this.max_iters,this.image_data.data,this.iter_values),this.setImageData(t),this.postUpdate()}updateColors(){this.dirty?this.update(!0):(this.setImageData(!0),this.postUpdate())}postUpdate(){this.m.ctx.putImageData(this.image_data,0,0),this.image.src=this.m.dom.canvas.toDataURL()}setImageData(t){let e=0,i=0;for(;i<this.iter_values.length;){if(t||255!=this.image_data.data[e+3]){const t=3*this.iter_values[i];this.image_data.data[e]=this.colormap[t],this.image_data.data[e+1]=this.colormap[t+1],this.image_data.data[e+2]=this.colormap[t+2],this.image_data.data[e+3]=255}e+=4,i++}}}n()}catch(t){n(t)}}))},446:(t,e,i)=>{"use strict";i.a(t,(async(t,e)=>{try{var n=i(9),o=i.n(n),s=i(271),a=i(435),r=i(801),l=i(288),h=i(695),c=i(122),d=t([r]);r=(d.then?(await d)():d)[0],i(851);const u=document.getElementById.bind(document),p=document.addEventListener.bind(document),m=document.querySelectorAll.bind(document);function v(){const t=u("canvas-container"),e=function(t){const e=document.createElement("canvas");return t.prepend(e),e}(t);!function(t){const e=u("mandelbrot-ui").content.cloneNode(!0);e.getElementById("working-message").style.display="none",t.append(e)}(t);const i={canvas:e,status:u("status-message"),coords:u("coords"),working_message:u("working-message"),detail_level_input:u("detail-level"),auto_adjust_detail:u("auto-adjust-detail"),color_input:u("interior-color"),popup_inputs:[...m(".popup input")]},n={dom:i,gradient_picker:new(o())({el:"#gradientslider"}),interior_color:[0,0,0],gradient:new s.Z({gradient:[{stop:0,color:[29,19,52]},{stop:8,color:[99,28,93]},{stop:16,color:[18,170,243]},{stop:25,color:[221,172,218]},{stop:34,color:[66,255,63]},{stop:42,color:[145,15,8]},{stop:50,color:[51,8,145]},{stop:58,color:[119,238,236]},{stop:66,color:[242,247,94]},{stop:74,color:[247,94,133]},{stop:82,color:[178,94,247]},{stop:90,color:[61,74,199]},{stop:99,color:[34,99,43]}],stop_min:0,stop_max:100}),ctx:i.canvas.getContext("2d"),detail_levels:[...m("#detail-level option")].map((t=>parseInt(t.value)))};n.pointer=new h.Z(n),p(),n.bounds=new a.Z(n),n.image=new r.Z({detail:1,model:n}),n.display=new l.Z(n);const d=new c.Z(n);function p(){const t=i.canvas.parentElement.offsetWidth;i.canvas.width=t,i.canvas.height=t,i.working_message.style.height=`${t}px`,i.working_message.style.lineHeight=`${t}px`,n.pointer.setSize(t)}function v(){i.canvas.width!==i.canvas.parentElement.offsetWidth&&(p(),n.image.setSize(),n.display.update())}i.auto_adjust_detail.checked=!0,i.detail_level_input.value=n.detail_levels[0],i.detail_level_input.disabled=!0,i.color_input.value="#000000",n.gradient_picker.on("handler:add",(t=>{t.getEl().querySelector(".grp-handler-close").innerHTML="&times;"})),n.gradient.getData().forEach((({stop:t,color:e})=>{const i="#".concat(...e.map((t=>t.toString(16).padStart(2,"0"))));n.gradient_picker.addHandler(t,i,!1)})),window.addEventListener("resize",(()=>{n.resizing_pid&&clearTimeout(n.resizing_pid),n.resizing_pid=setTimeout(v,200)}),!0),i.auto_adjust_detail.addEventListener("change",(()=>d.changeAutoDetail())),i.detail_level_input.addEventListener("change",(()=>d.changeDetailLevel())),i.color_input.addEventListener("change",(()=>d.changeInteriorColor())),u("zoom").addEventListener("click",(()=>d.onZoom())),u("zoomout").addEventListener("click",(()=>d.onZoomOut())),u("reset").addEventListener("click",(()=>d.onReset())),u("save-button").addEventListener("click",(t=>{d.saveCanvas(),d.closePopup(t)})),document.querySelectorAll(".ui-button").forEach((t=>t.addEventListener("click",(t=>d.openPopup(t))))),document.querySelectorAll(".popup-close").forEach((t=>t.addEventListener("click",(t=>d.closePopup(t))))),n.gradient_picker.on("change",(t=>d.changeGradient(t))),n.gradient_picker.el.addEventListener("click",(t=>{t.target.classList.contains("grp-handler-close")&&1===n.gradient_picker.handlers.length&&t.stopPropagation()}),!0),n.image.setColorMap(),n.display.update()}"loading"!==document.readyState?v():p("DOMContentLoaded",v),e()}catch(f){e(f)}}))},695:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(603);class o{constructor(t){this.m=t,this.down={x:0,y:0},this.up={x:0,y:0},this.is_down=!1,this.is_panning=!1,this.pan_event_id=null,this.touches=0,this.down_time=null,this.selection={x1:0,y1:0,x2:0,y2:0},this.overlay=this._createOverlay(t.dom.canvas),this.overlay_ctx=this.overlay.getContext("2d"),this.overlay.addEventListener("pointerdown",(t=>this._onDown(t)),{passive:!1}),this.overlay.addEventListener("pointerup",(t=>this._onUp(t)),{passive:!1}),this.overlay.addEventListener("pointermove",(t=>this._onMove(t)),{passive:!1}),this.overlay.addEventListener("touchstart",this._kill,{passive:!1}),this.overlay.addEventListener("touchmove",this._kill,{passive:!1}),this.changeCursorToDefault()}setSize(t){this.overlay.width=t,this.overlay.height=t,this.overlay_ctx.fillStyle="rgba(0,0,0,0)",this.overlay_ctx.fillRect(0,0,t,t)}reset(){this.up.x=this.up.y=this.down.x=this.down.y=0,this.selection.x1=this.selection.y1=this.selection.x2=this.selection.y2=0}clearSelectionBox(){this.overlay_ctx.clearRect(0,0,this.m.dom.canvas.width,this.m.dom.canvas.height)}changeCursorToDefault(){this.overlay.style.cursor="crosshair"}changeCursorToPan(){this.overlay.style.cursor="move"}changeCursorToWait(){this.overlay.style.cursor="wait"}_createOverlay(t){const e=document.createElement("canvas");return e.style.position="absolute",e.style.left=0,e.style.top=0,e.style.zIndex=5,t.after(e),e.style.touchAction="none",e}_kill(t){t.preventDefault(),t.stopImmediatePropagation()}_onDown(t){if(0===t.button){if(t.preventDefault(),t.stopImmediatePropagation(),this.overlay.setPointerCapture(t.pointerId),this.down_time=t.timeStamp,"touch"===t.pointerType&&(this.touches+=1,1===this.touches&&(this.pan_event_id=t.pointerId)),"touch"!==t.pointerType||"touch"===t.pointerType&&1===this.touches){if(this._isInsideSelectionBox(t.offsetX,t.offsetY))return void this._zoomToSelectionBox();this.clearSelectionBox(),this.is_down=!0,this.selection.x1=this.selection.x2=this.down.x=t.offsetX,this.selection.y1=this.selection.y2=this.down.y=t.offsetY}("touch"!==t.pointerType&&t.shiftKey||"touch"===t.pointerType&&2===this.touches)&&(this.changeCursorToPan(),this.is_panning=!0)}}_onUp(t){if(0===t.button&&(t.preventDefault(),t.stopImmediatePropagation(),"touch"===t.pointerType&&(this.touches=Math.max(this.touches-1,0)),!(null!==this.down_time&&t.timeStamp-this.down_time<50)))if(("touch"!==t.pointerType||"touch"===t.pointerType&&(!this.is_panning&&0===this.touches||this.is_panning&&t.pointerId===this.pan_event_id))&&(this.is_down=!1,this.up.x=t.offsetX,this.up.y=t.offsetY,this.is_panning)){if(this.is_panning=!1,this.changeCursorToDefault(),this.down.x!==this.up.x&&this.down.y!==this.up.y){const t=(0,n.fJ)(this.m.bounds,this.m.dom.canvas.width),e=(0,n.qX)(this.m.bounds,this.m.dom.canvas.height),i=(this.up.x-this.down.x)*t,o=(this.up.y-this.down.y)*e,s={left:-i,right:-i,top:o,bottom:o};this.m.bounds.offsetBy(s),this.m.display.update(!1)}}else("touch"!==t.pointerType||"touch"===t.pointerType&&0===this.touches)&&this.selection.x2>this.selection.x1&&this._drawSelectionBoxLabel()}_onMove(t){t.preventDefault(),t.stopImmediatePropagation(),this._showCoords(t.offsetX,t.offsetY),this.is_down&&(this.is_panning?("touch"!==t.pointerType||"touch"===t.pointerType&&t.pointerId===this.pan_event_id)&&this.m.image.drawMovedImage(t.offsetX,t.offsetY,this.down.x,this.down.y):(this._updateSelectionBox(t.offsetX,t.offsetY),this._drawSelectionBox()))}_updateSelectionBox(t,e){const i=this.m.dom.canvas.height/this.m.dom.canvas.width,n=Math.abs(t-this.down.x)*i;this.selection.y1=this.selection.y2=this.down.y,e>=this.down.y?(this.selection.y2+=n,t>=this.down.x?(this.selection.x1=this.down.x,this.selection.x2=t):(this.selection.x1=t,this.selection.x2=this.down.x)):(this.selection.y1-=n,t>=this.down.x?(this.selection.x1=this.down.x,this.selection.x2=t):(this.selection.x1=t,this.selection.x2=this.down.x))}_drawSelectionBoxLabel(){const t="Click inside to zoom",e=this.m.dom.canvas.width,i=Math.round(.01*e),n=Math.round(.01*e),o=this.overlay_ctx,s=Math.round(.03*e*.5+8);o.font=`normal ${s}px Arial,Helvetica,sans-serif`;const a=o.measureText(t),r=a.width,l=a.actualBoundingBoxAscent+a.actualBoundingBoxDescent;o.fillStyle="#111";const h=Math.round(r+2*i),c=Math.round(l+2*n);o.fillRect(this.selection.x1,this.selection.y2+8,h,c),o.strokeStyle="#777",o.strokeRect(this.selection.x1,this.selection.y2+8,h,c),o.fillStyle="#ddd",o.textBaseline="top",o.fillText(t,this.selection.x1+i,this.selection.y2+n+8-1)}_zoomToSelectionBox(){const t=(0,n.fJ)(this.m.bounds,this.m.dom.canvas.width),e=(0,n.qX)(this.m.bounds,this.m.dom.canvas.height);this.m.bounds.offsetBy({left:this.selection.x1*t,right:(this.selection.x2-this.m.dom.canvas.width)*t,top:-this.selection.y1*e,bottom:(this.m.dom.canvas.height-this.selection.y2)*e}),this.m.display.update()}_showCoords(t,e){const i=(0,n.fJ)(this.m.bounds,this.m.dom.canvas.width),o=this.m.bounds.left+t*i,s=this.m.bounds.top-e*i;this.m.dom.coords.innerText=`(${o}, ${s})`}_drawSelectionBox(){this.selection.x2>this.selection.x1&&this.overlay_ctx.clearRect(0,0,this.m.dom.canvas.width,this.m.dom.canvas.height),this.overlay_ctx.strokeStyle="rgba(0, 0, 0, 1)";const t=this.selection.x2-this.selection.x1,e=this.selection.y2-this.selection.y1;this.overlay_ctx.strokeRect(this.selection.x1,this.selection.y1,t,e),this.overlay_ctx.strokeStyle="rgba(255, 255, 255, 1)",this.overlay_ctx.strokeRect(this.selection.x1+1,this.selection.y1+1,t-1,e-1)}_isInsideSelectionBox(t,e){return t>this.selection.x1&&t<this.selection.x2&&e>this.selection.y1&&e<this.selection.y2}}},122:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(603);class o{constructor(t){this.m=t}openPopup(t){const e=t.currentTarget.getAttribute("data-popup"),i=document.getElementById(e);document.querySelectorAll(".mandelbrot-popup.active").forEach((t=>this._closePopup(t))),i.classList.add("active")}closePopup(t){this._closePopup(t.currentTarget.closest(".mandelbrot-popup"))}onZoom(){let t=(this.m.bounds.right-this.m.bounds.left)/4,e=(this.m.bounds.top-this.m.bounds.bottom)/4;this.m.bounds.offsetBy({left:t,right:-t,top:-e,bottom:e}),this.m.display.update()}onZoomOut(){let t=(this.m.bounds.right-this.m.bounds.left)/2,e=(this.m.bounds.top-this.m.bounds.bottom)/2;this.m.bounds.offsetBy({left:-t,right:t,top:e,bottom:-e}),this.m.display.update()}onReset(){this.m.bounds.reset(),parseInt(1!==this.m.dom.detail_level_input.value)&&(this.m.dom.detail_level_input.value=1,this.m.image.setDetail(1)),this.m.display.update()}changeDetailLevel(){const t=parseInt(this.m.dom.detail_level_input.value);this.m.image.setDetail(t)&&setTimeout((()=>this.m.display.update()),1)}changeAutoDetail(){this.m.dom.detail_level_input.disabled=this.m.dom.auto_adjust_detail.checked,this.m.dom.auto_adjust_detail.checked&&this.m.display.update()}changeInteriorColor(){const t=(0,n.wK)(this.m.dom.color_input.value);(0,n.Dg)(this.m.interior_color,t)||(this.m.interior_color=t,this.m.image.setColorMapInterior(t))}changeGradient(t){if(!t)return;let e=this.m.gradient_picker.handlers;e.sort(((t,e)=>t.position-e.position)),this.m.gradient.setData(e.map((t=>({stop:t.getPosition(),color:this._getHandlerColor(t)})))),this.m.image.setColorMap(),this.m.image.updateColors()}saveCanvas(){const t=document.createElement("a");t.href=this.m.dom.canvas.toDataURL("image/png"),t.download="mandelbrot.png",t.style.display="none",document.body.appendChild(t),t.click(),t.remove()}_closePopup(t){t.classList.remove("active")}_getHandlerColor(t){let e=t.getColor();if("rgb"===e.substr(0,3))return/^rgba?\((\d+), (\d+), (\d+)/.exec(e).slice(1).map(Number);if("#"!==e.substr(0,1)){const t=this.m.ctx,i=t.fillStyle;t.fillStyle=e,e=t.fillStyle,t.fillStyle=i}return(0,n.wK)(e)}}},603:(t,e,i)=>{"use strict";function n(t){return"#"==t.substr(0,1)&&(t=t.substr(1)),[0,1,2].map((e=>parseInt(t.substr(2*e,2),16)))}function o(t,e){return(t.right-t.left)/e}function s(t,e){return(t.top-t.bottom)/e}function a(t){t.style.display="block"}function r(t){t.style.display="none"}function l(t,e){return t.every(((t,i)=>t===e[i]))}i.d(e,{$Z:()=>a,Cp:()=>r,Dg:()=>l,fJ:()=>o,qX:()=>s,wK:()=>n})},453:(t,e,i)=>{"use strict";i.a(t,(async(t,n)=>{try{i.d(e,{U:()=>u});var o=i(246),s=t([o]);o=(s.then?(await s)():s)[0];let a=new Uint8Array;let r=0;function l(t,e){const i=e(1*t.length);return(0===a.byteLength&&(a=new Uint8Array(o.memory.buffer)),a).set(t,i/1),r=t.length,i}let h=new Uint32Array;function c(){return 0===h.byteLength&&(h=new Uint32Array(o.memory.buffer)),h}function d(t,e){const i=e(4*t.length);return c().set(t,i/4),r=t.length,i}function u(t,e,i,n,s,a,h,u,p,m){try{const g=l(p,o.__wbindgen_malloc),y=r;var v=d(m,o.__wbindgen_malloc),f=r;o.iterate(t,e,i,n,s,a,h,u,g,y,v,f)}finally{m.set(c().subarray(v/4,v/4+f)),o.__wbindgen_free(v,4*f)}}n()}catch(p){n(p)}}))},246:(t,e,i)=>{"use strict";t.exports=i.v(e,t.id,"d0b314429d53b4572276")}},s={};function a(t){var e=s[t];if(void 0!==e)return e.exports;var i=s[t]={id:t,exports:{}};return o[t].call(i.exports,i,i.exports,a),i.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",i="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=t=>{t&&!t.d&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},a.a=(o,s,a)=>{var r;a&&((r=[]).d=1);var l,h,c,d=new Set,u=o.exports,p=new Promise(((t,e)=>{c=e,h=t}));p[e]=u,p[t]=t=>(r&&t(r),d.forEach(t),p.catch((t=>{}))),o.exports=p,s((o=>{var s;l=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[t])return o;if(o.then){var s=[];s.d=0,o.then((t=>{a[e]=t,n(s)}),(t=>{a[i]=t,n(s)}));var a={};return a[t]=t=>t(s),a}}var r={};return r[t]=t=>{},r[e]=o,r})))(o);var a=()=>l.map((t=>{if(t[i])throw t[i];return t[e]})),h=new Promise((e=>{(s=()=>e(a)).r=0;var i=t=>t!==r&&!d.has(t)&&(d.add(t),t&&!t.d&&(s.r++,t.push(s)));l.map((e=>e[t](i)))}));return s.r?h:a()}),(t=>(t?c(p[i]=t):h(u),n(r)))),r&&(r.d=0)},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.v=(t,e,i,n)=>{var o=fetch(a.p+""+i+".module.wasm");return"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(o,n).then((e=>Object.assign(t,e.instance.exports))):o.then((t=>t.arrayBuffer())).then((t=>WebAssembly.instantiate(t,n))).then((e=>Object.assign(t,e.instance.exports)))},a.p="/static/";a(446)})();